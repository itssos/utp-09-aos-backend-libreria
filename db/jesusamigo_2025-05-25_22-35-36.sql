--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: postgres
--

-- *not* creating schema, since initdb creates it


ALTER SCHEMA public OWNER TO postgres;

--
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON SCHEMA public IS '';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: admins; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.admins (
    id bigint NOT NULL,
    person_id bigint NOT NULL
);


ALTER TABLE public.admins OWNER TO postgres;

--
-- Name: admins_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.admins ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.admins_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: authors; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.authors (
    id integer NOT NULL,
    active boolean NOT NULL,
    bio character varying(250),
    name character varying(80) NOT NULL
);


ALTER TABLE public.authors OWNER TO postgres;

--
-- Name: authors_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.authors ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.authors_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: categories; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.categories (
    id integer NOT NULL,
    active boolean NOT NULL,
    description character varying(200),
    name character varying(60) NOT NULL
);


ALTER TABLE public.categories OWNER TO postgres;

--
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.categories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: editorials; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.editorials (
    id integer NOT NULL,
    active boolean NOT NULL,
    name character varying(80) NOT NULL
);


ALTER TABLE public.editorials OWNER TO postgres;

--
-- Name: editorials_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.editorials ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.editorials_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.permissions (
    id integer NOT NULL,
    label character varying(50) NOT NULL,
    name character varying(50) NOT NULL
);


ALTER TABLE public.permissions OWNER TO postgres;

--
-- Name: permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: persons; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.persons (
    id bigint NOT NULL,
    address character varying(150) NOT NULL,
    birth_date date NOT NULL,
    dni character varying(8) NOT NULL,
    first_name character varying(100) NOT NULL,
    gender character varying(255) NOT NULL,
    last_name character varying(100) NOT NULL,
    phone character varying(15) NOT NULL,
    user_id integer NOT NULL,
    CONSTRAINT persons_gender_check CHECK (((gender)::text = ANY ((ARRAY['MASCULINO'::character varying, 'FEMENINO'::character varying])::text[])))
);


ALTER TABLE public.persons OWNER TO postgres;

--
-- Name: persons_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.persons ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.persons_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: products; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.products (
    id integer NOT NULL,
    active boolean NOT NULL,
    code character varying(50) NOT NULL,
    description character varying(500),
    image_url character varying(500),
    isbn character varying(20) NOT NULL,
    price numeric(10,2) NOT NULL,
    publication_date date,
    stock integer NOT NULL,
    title character varying(120) NOT NULL,
    author_id integer NOT NULL,
    category_id integer NOT NULL,
    editorial_id integer NOT NULL,
    CONSTRAINT products_stock_check CHECK ((stock >= 0))
);


ALTER TABLE public.products OWNER TO postgres;

--
-- Name: products_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.products ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.products_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    description character varying(100),
    name character varying(50) NOT NULL
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.roles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles_permissions (
    role_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.roles_permissions OWNER TO postgres;

--
-- Name: sale_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sale_items (
    id integer NOT NULL,
    quantity integer NOT NULL,
    total_price numeric(12,2) NOT NULL,
    unit_price numeric(10,2) NOT NULL,
    product_id integer NOT NULL,
    sale_id integer NOT NULL,
    CONSTRAINT sale_items_quantity_check CHECK ((quantity >= 1))
);


ALTER TABLE public.sale_items OWNER TO postgres;

--
-- Name: sale_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.sale_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.sale_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: sales; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sales (
    id integer NOT NULL,
    amount_paid numeric(12,2) NOT NULL,
    change_amount numeric(12,2) NOT NULL,
    sale_date timestamp(6) without time zone NOT NULL,
    total_amount numeric(12,2) NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE public.sales OWNER TO postgres;

--
-- Name: sales_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.sales ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.sales_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: stock_movements; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.stock_movements (
    id integer NOT NULL,
    movement_date timestamp(6) without time zone NOT NULL,
    quantity integer NOT NULL,
    reason character varying(200),
    type character varying(10) NOT NULL,
    product_id integer NOT NULL,
    CONSTRAINT stock_movements_quantity_check CHECK ((quantity >= 1)),
    CONSTRAINT stock_movements_type_check CHECK (((type)::text = ANY ((ARRAY['IN'::character varying, 'OUT'::character varying])::text[])))
);


ALTER TABLE public.stock_movements OWNER TO postgres;

--
-- Name: stock_movements_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.stock_movements ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.stock_movements_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    active boolean NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    email character varying(50),
    password character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone NOT NULL,
    username character varying(50) NOT NULL,
    role_id integer NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: admins; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.admins (id, person_id) FROM stdin;
1	1
\.


--
-- Data for Name: authors; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.authors (id, active, bio, name) FROM stdin;
3	t	Novelista y guionista estadounidense, autor de "El resplandor" y "It".	Stephen King
4	t	Escritor ruso, autor de "Crimen y castigo" y "Los hermanos Karamazov".	Fi¢dor Dostoyevski
5	t	Autor argentino, reconocido por su obra "Fervor de Buenos Aires".	Jorge Luis Borges
6	t	Escritor ingl‚s, creador de "1984" y "Rebeli¢n en la granja".	George Orwell
7	t	Poeta y diplom tico chileno, Premio Nobel de Literatura en 1971.	Pablo Neruda
8	t	Escritor estadounidense, autor de "Las aventuras de Tom Sawyer".	Mark Twain
9	t	Novelista francesa, autora de "El segundo sexo".	Simone de Beauvoir
10	t	Escritor peruano, Premio Nobel de Literatura y autor de "La ciudad y los perros".	Mario Vargas Llosa
11	t	Poeta y dramaturgo espa¤ol, figura clave de la Generaci¢n del 27.	Federico Garc¡a Lorca
12	t	Escritor checo, autor de "La metamorfosis".	Franz Kafka
13	t	Autor estadounidense, conocido por "El gran Gatsby".	F. Scott Fitzgerald
14	t	Novelista colombiana, autora de "Delirio".	Laura Restrepo
15	t	Escritor franc‚s, creador de "Los miserables".	Victor Hugo
16	t	Autor brit nico, c‚lebre por su obra "Orgullo y prejuicio".	Jane Austen
17	t	Novelista estadounidense, autor de "Matar a un ruise¤or".	Harper Lee
1	t	Escritor y periodista colombiano, autor de 'Cien años de soledad'.	Gabriel García Márquez
2	t	Novelista brit nico, autor de la serie de Harry Potter.	J.K. Rowling
\.


--
-- Data for Name: categories; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.categories (id, active, description, name) FROM stdin;
1	t	Dispositivos electrónicos y gadgets	Electrónica
2	t	Libros de ficci¢n, novelas y cuentos	Ficci¢n
3	t	Libros de ciencia, tecnolog¡a y matem tica	Ciencia y Tecnolog¡a
4	t	Libros para ni¤os y adolescentes	Infantil y Juvenil
5	t	Obras de referencia, diccionarios, enciclopedias	Referencia
6	t	Libros de arte, m£sica y fotograf¡a	Arte y Fotograf¡a
7	t	Recetas, cocina y gastronom¡a	Cocina
8	t	Desarrollo personal, autoayuda y bienestar	Desarrollo Personal
9	t	Negocios, econom¡a y finanzas	Negocios
10	t	Historietas, manga y c¢mics	C¢mics
11	t	Historia, pol¡tica y sociedad	Historia y Pol¡tica
12	t	Libros religiosos y espirituales	Religi¢n y Espiritualidad
13	t	Libros en otros idiomas	Idiomas
14	t	Salud, medicina y deportes	Salud y Deportes
15	t	Gu¡as de viaje y turismo	Viajes
16	t	Libros de inform tica y programaci¢n	Inform tica
17	t	Ensayos y cr¡tica literaria	Ensayo
18	t	Libros universitarios y acad‚micos	Acad‚micos
19	t	Manualidades, hobbies y pasatiempos	Hobbies
\.


--
-- Data for Name: editorials; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.editorials (id, active, name) FROM stdin;
2	t	Penguin Random House
3	t	HarperCollins
5	t	Anagrama
6	t	Alfaguara
7	t	Editorial SM
8	t	Ediciones Era
9	t	Ediciones Paid¢s
10	t	Tusquets Editores
11	t	Siglo XXI Editores
12	t	Ediciones B
13	t	Editorial Norma
14	t	Editorial Cr¡tica
15	t	Editorial Siruela
16	t	Ediciones Destino
17	t	Editorial Universitaria
18	t	Editorial Los Libros del Lince
19	t	Editorial Oc‚ano
20	t	Editorial Sudamericana
21	t	Fondo de Cultura Econ¢mica
1	t	Editorial Planeta
4	t	Santillana
\.


--
-- Data for Name: permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.permissions (id, label, name) FROM stdin;
1	Crear persona	CREATE_PERSON
2	Detalle de persona	GET_PERSON
3	Ver personas	GET_PERSONS
4	Eliminar persona	DELETE_PERSON
5	Detalle de permiso	GET_PERMISSION
6	Ver permisos	GET_PERMISSIONS
7	Remover permiso de rol	REMOVE_ROLE_PERMISSION
8	Asignar permisos a rol	ASSIGN_ROLE_PERMISSION
9	Crear autor	CREATE_AUTHOR
10	Crear autor	GET_AUTHORS
11	Ver autor	GET_AUTHOR
12	Actualizar autor	UPDATE_AUTHOR
13	Eliminar autor	DELETE_AUTHOR
14	Crear categoría	CREATE_CATEGORY
15	Listar categorías	GET_CATEGORIES
16	Obtener categoría	GET_CATEGORY
17	Actualizar categoría	UPDATE_CATEGORY
18	Eliminar categoría	DELETE_CATEGORY
19	Crear editorial	CREATE_EDITORIAL
20	Listar editoriales	GET_EDITORIALS
21	Obtener editorial	GET_EDITORIAL
22	Actualizar editorial	UPDATE_EDITORIAL
23	Eliminar editorial	DELETE_EDITORIAL
24	Crear producto	CREATE_PRODUCT
25	Listar productos	GET_PRODUCTS
26	Obtener producto	GET_PRODUCT
27	Actualizar producto	UPDATE_PRODUCT
28	Eliminar producto	DELETE_PRODUCT
29	Crear movimiento de stock	CREATE_STOCK_MOVEMENT
30	Actualizar movimiento de stock	UPDATE_STOCK_MOVEMENT
31	Listar movimientos de stock	GET_STOCK_MOVEMENTS
32	Obtener movimiento de stock	GET_STOCK_MOVEMENT
33	Recargar stock	RECHARGE_STOCK
34	Dar de baja stock	DECREASE_STOCK
35	Consultar stock de producto	GET_PRODUCT_STOCK
36	Registrar venta	CREATE_SALE
37	Listar ventas	GET_SALES
38	Obtener venta	GET_SALE
39	Crear rol	CREATE_ROLE
40	Detalle de rol	GET_ROLE
41	Ver roles	GET_ROLES
42	Eliminar rol	DELETE_ROLE
43	Actualizar rol	UPDATE_ROLE
44	Ver reporte	REPORTS_VIEW
45	Actualizar estado del producto	UPDATE_PRODUCT_ACTIVE
46	Ver productos	VIEW_ALL_PRODUCTS
47	Ver usuarios	GET_USERS
\.


--
-- Data for Name: persons; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.persons (id, address, birth_date, dni, first_name, gender, last_name, phone, user_id) FROM stdin;
1	Calle Aleatoria 123	2003-07-22	12345678	Sair	MASCULINO	Marquez Hidalgo	987654321	1
\.


--
-- Data for Name: products; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.products (id, active, code, description, image_url, isbn, price, publication_date, stock, title, author_id, category_id, editorial_id) FROM stdin;
3	t	THR-001	Un cl sico de terror y suspenso.	https://m.media-amazon.com/images/M/MV5BYjg1YTRkNzQtODgyYi00MTQ5LThiMDYtNDJjMWRjNTdjZDZlXkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_.jpg	978-0450411434	42.56	1986-09-16	20	It	3	2	3
1	t	JAVA-001	Una guía completa sobre concurrencia en Java.	https://images-cn.ssl-images-amazon.com/images/I/51K%2BRJLKkkL._SX382_BO1,204,203,200_.jpg	978-0134685991	49.90	2018-05-10	4	Java Concurrency in Practice	1	1	1
4	t	CLA-001	Obra maestra de la literatura rusa.	https://images-na.ssl-images-amazon.com/images/I/81GqtNbs%2BPL.jpg	978-0140449136	55.00	1866-01-01	5	Crimen y castigo	4	2	4
9	t	LHV-002	Estas son las flipantes aventuras del viejo en macarron	https://tse3.mm.bing.net/th/id/OIP.X3UlvJ9uJOpNfBBRHZJhgwHaK9?cb=iwc2&rs=1&pid=ImgDetMain	278-3430431434	29.93	2025-04-28	27	Las locas historias del viejo	4	10	18
2	t	FIC-001	Una m gica aventura en una escuela de magia.	https://images-na.ssl-images-amazon.com/images/I/81iqZ2HHD-L.jpg	978-0747532699	59.90	1997-06-26	15	Harry Potter y la piedra filosofal	2	2	2
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (id, description, name) FROM stdin;
1	Administrador	ADMINISTRADOR
\.


--
-- Data for Name: roles_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles_permissions (role_id, permission_id) FROM stdin;
1	5
1	6
1	7
1	8
1	9
1	10
1	11
1	12
1	13
1	14
1	15
1	16
1	17
1	18
1	19
1	20
1	21
1	22
1	23
1	24
1	25
1	26
1	27
1	28
1	29
1	30
1	31
1	32
1	33
1	34
1	35
1	36
1	37
1	38
1	39
1	40
1	41
1	42
1	43
1	44
1	45
1	46
1	47
1	1
1	2
1	3
1	4
\.


--
-- Data for Name: sale_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sale_items (id, quantity, total_price, unit_price, product_id, sale_id) FROM stdin;
1	2	99.80	49.90	1	1
2	2	99.80	49.90	1	2
3	6	299.40	49.90	1	3
4	1	55.00	55.00	4	3
5	3	89.79	29.93	9	3
\.


--
-- Data for Name: sales; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sales (id, amount_paid, change_amount, sale_date, total_amount, user_id) FROM stdin;
1	100.00	0.20	2025-05-24 12:32:35.759418	99.80	1
2	200.00	100.20	2025-05-25 09:10:42.891238	99.80	1
3	500.00	55.81	2025-05-25 17:39:47.060194	444.19	1
\.


--
-- Data for Name: stock_movements; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.stock_movements (id, movement_date, quantity, reason, type, product_id) FROM stdin;
1	2025-05-25 16:56:42.175103	1		IN	9
2	2025-05-25 17:32:25.771798	14	Consegui mas libros	IN	9
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, active, created_at, email, password, updated_at, username, role_id) FROM stdin;
1	t	2025-05-24 12:19:01.939436	admin@jesusamigo.com	$2a$10$uSbbyPy1YHe/tHiODtx3k.o7x1UPQ8yf5T4amALoVYf9DDJmwH2RO	2025-05-24 12:19:01.939436	admin	1
\.


--
-- Name: admins_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.admins_id_seq', 1, true);


--
-- Name: authors_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.authors_id_seq', 17, true);


--
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.categories_id_seq', 20, true);


--
-- Name: editorials_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.editorials_id_seq', 23, true);


--
-- Name: permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.permissions_id_seq', 47, true);


--
-- Name: persons_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.persons_id_seq', 1, true);


--
-- Name: products_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.products_id_seq', 9, true);


--
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_id_seq', 1, true);


--
-- Name: sale_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sale_items_id_seq', 5, true);


--
-- Name: sales_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sales_id_seq', 3, true);


--
-- Name: stock_movements_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.stock_movements_id_seq', 2, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 1, true);


--
-- Name: admins admins_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_pkey PRIMARY KEY (id);


--
-- Name: authors authors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.authors
    ADD CONSTRAINT authors_pkey PRIMARY KEY (id);


--
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- Name: editorials editorials_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.editorials
    ADD CONSTRAINT editorials_pkey PRIMARY KEY (id);


--
-- Name: permissions permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_pkey PRIMARY KEY (id);


--
-- Name: persons persons_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT persons_pkey PRIMARY KEY (id);


--
-- Name: products products_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT products_pkey PRIMARY KEY (id);


--
-- Name: roles_permissions roles_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_pkey PRIMARY KEY (role_id, permission_id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: sale_items sale_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale_items
    ADD CONSTRAINT sale_items_pkey PRIMARY KEY (id);


--
-- Name: sales sales_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT sales_pkey PRIMARY KEY (id);


--
-- Name: stock_movements stock_movements_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.stock_movements
    ADD CONSTRAINT stock_movements_pkey PRIMARY KEY (id);


--
-- Name: products uk57ivhy5aj3qfmdvl6vxdfjs4p; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT uk57ivhy5aj3qfmdvl6vxdfjs4p UNIQUE (code);


--
-- Name: persons uk9ieowpbwhbaefgakkpmkkq4w8; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT uk9ieowpbwhbaefgakkpmkkq4w8 UNIQUE (user_id);


--
-- Name: users uk_users_email; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk_users_email UNIQUE (email);


--
-- Name: users uk_users_username; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk_users_username UNIQUE (username);


--
-- Name: roles ukofx66keruapi6vyqpv6f2or37; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT ukofx66keruapi6vyqpv6f2or37 UNIQUE (name);


--
-- Name: admins ukpfpcnvmok0okyrvaw94ecxnbq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT ukpfpcnvmok0okyrvaw94ecxnbq UNIQUE (person_id);


--
-- Name: permissions ukpnvtwliis6p05pn6i3ndjrqt2; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT ukpnvtwliis6p05pn6i3ndjrqt2 UNIQUE (name);


--
-- Name: editorials ukr8mewgrcus4i96o3wc69tv6fn; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.editorials
    ADD CONSTRAINT ukr8mewgrcus4i96o3wc69tv6fn UNIQUE (name);


--
-- Name: products ukrh1lfswnep8or0nb63b6jq1dk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT ukrh1lfswnep8or0nb63b6jq1dk UNIQUE (isbn);


--
-- Name: persons ukt0tma5e5ec4leolu2gaqpc9v7; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT ukt0tma5e5ec4leolu2gaqpc9v7 UNIQUE (dni);


--
-- Name: categories ukt8o6pivur7nn124jehx7cygw5; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT ukt8o6pivur7nn124jehx7cygw5 UNIQUE (name);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: sales fk5bgaw8g0rrbqdvafq36g58smk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT fk5bgaw8g0rrbqdvafq36g58smk FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: sale_items fk7tcpbc5c5mpnm8fl2phl8ep7l; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale_items
    ADD CONSTRAINT fk7tcpbc5c5mpnm8fl2phl8ep7l FOREIGN KEY (sale_id) REFERENCES public.sales(id);


--
-- Name: sale_items fk8g0sjiqs7tg055o06p6wawu39; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale_items
    ADD CONSTRAINT fk8g0sjiqs7tg055o06p6wawu39 FOREIGN KEY (product_id) REFERENCES public.products(id);


--
-- Name: admins fk9xjko0me15m53jafo21kplmt1; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT fk9xjko0me15m53jafo21kplmt1 FOREIGN KEY (person_id) REFERENCES public.persons(id);


--
-- Name: roles_permissions fkbx9r9uw77p58gsq4mus0mec0o; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT fkbx9r9uw77p58gsq4mus0mec0o FOREIGN KEY (permission_id) REFERENCES public.permissions(id);


--
-- Name: stock_movements fkjcaag8ogfjxpwmqypi1wfdaog; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.stock_movements
    ADD CONSTRAINT fkjcaag8ogfjxpwmqypi1wfdaog FOREIGN KEY (product_id) REFERENCES public.products(id);


--
-- Name: products fklj2qsom080w8ycdsv2fk07bx2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT fklj2qsom080w8ycdsv2fk07bx2 FOREIGN KEY (editorial_id) REFERENCES public.editorials(id);


--
-- Name: products fkog2rp4qthbtt2lfyhfo32lsw9; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT fkog2rp4qthbtt2lfyhfo32lsw9 FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: users fkp56c1712k691lhsyewcssf40f; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT fkp56c1712k691lhsyewcssf40f FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: roles_permissions fkqi9odri6c1o81vjox54eedwyh; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT fkqi9odri6c1o81vjox54eedwyh FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: persons fkrp309masjisdm7mmqon63obpv; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT fkrp309masjisdm7mmqon63obpv FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: products fky2kver9ldog29n3mi9b12w64; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT fky2kver9ldog29n3mi9b12w64 FOREIGN KEY (author_id) REFERENCES public.authors(id);


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE USAGE ON SCHEMA public FROM PUBLIC;


--
-- PostgreSQL database dump complete
--

